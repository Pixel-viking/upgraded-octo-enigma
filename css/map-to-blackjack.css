#storyboard-container {
    display: block;
    position: relative;
    
    text-align: center;
    max-width: 536px;
    height: 728px;

    border: solid 20px rgba(255,220,1,1);
    background: rgba(245,245,245,1);
    left: 790px;
    z-index: 4;
}

#storyboard-container img {
    height: 250px;
    padding: 0px 10px 0px 10px
}

#casino-link {
    position: absolute;

    top: 450px;
    left: 60px;
    width: 110px;
    height: 110px;
    cursor: pointer;
    z-index: 2;
}

/* Makes the text fade in, I put the every curclybracket in line to make it easier to read as there's only one line per bracket */
#line1, #line2, #line3, #line4, #line5 {
    opacity: 0;
    animation-name: chat-text-appear;
    animation-duration: 1s;
    animation-timing-function: ease; 
    animation-fill-mode: forwards;
}

#line1 { animation-delay: 1s; }
#line2 { animation-delay: 2s; }
#line3 { animation-delay: 3s; }
#line4 { animation-delay: 4s; }
#line5 { animation-delay: 5s; }

h1 {
    position: relative;
    opacity: 0;
    z-index: 2;

    animation:  chat-text-appear 1s ease 6s 1 forwards, 
                shake-text 1s ease-out 7s infinite forwards;
                /* , 
                text-chopper 0.1s linear 12s infinite forwards, 
                text-fly-away 3s linear 13s 1 forwards; */
}

@keyframes chat-text-appear {
    100% { opacity: 1; }
}

@keyframes shake-text {
    0% {
        transform: rotate(0deg);
    }
    10% {
        transform: rotate(5deg);
    }
    20% {
        transform: rotate(-5deg);
    }
    30% {
        transform: rotate(5deg);
    }
    40% {
        transform: rotate(-5deg);
    }
}


#ufo-container {
    /* Just needs to change the --ufo-width and the second variable will get the half
        I did it this way or else the circle goes too far away from its position */
    --orbit-size: 100px;
    --orbit-size-half: calc(var(--orbit-size)/2);

    /* Ufo size and scaling. The scale it gets to its target, might have to change it manually on the fly away animation */
    --ufo-size: 50px;
    
    z-index: 2;
    position: absolute;
    width: var(--orbit-size);
    height: var(--orbit-size);
    top: -50px;
    left: -250px;
    
    border-radius: 50%;
    transform: translateX(var(--orbit-size-half));

    /* Animation-timer and iterations needs to be synced between "ufo-orbit" and "ufo-counter-rotate" keyframes
       I added variables for easy editing so we don't have to do head math every time we change something */
    --ufo-flies-in-delay: 0s;
    --ufo-flies-in-duration: 1.5s;

    /* For the orbit animation */
    --orbit-timer: 1s; /* Duration of each orbit */
    --orbit-iterations: 5; /* Number of orbits */
    --orbit-delay: calc(var(--ufo-flies-in-duration) + var(--ufo-flies-in-delay)); /* Delay for starting the orbit */

    /* For the ufo flies away animation */
    --ufo-flies-away-duration: 2s; /* How fast it flies away */
    --ufo-flies-away-delay: calc(var(--orbit-delay) + var(--orbit-timer) * var(--orbit-iterations)); /* Delay for flying away */
}

#ufo-container {
    animation:  ufo-flies-in var(--ufo-flies-in-duration) linear var(--ufo-flies-in-delay) forwards,
                ufo-orbit var(--orbit-timer) linear var(--orbit-delay) var(--orbit-iterations),
                ufo-flies-away var(--ufo-flies-away-duration) ease-in-out var(--ufo-flies-away-delay) forwards;
}

@keyframes ufo-flies-in {
    0% {  /* Start Position Under storyboard */
        top: 360px; 
        left: 820px;
        transform: translateX(var(--orbit-size-half)) scale(1.4);
    }
    100% {  /* To the casino */
        top: 440px;
        left: 50px;
        transform: translateX(var(--orbit-size-half)) scale(1.5);
    }
}

/* This rotates the container */
@keyframes ufo-orbit {
    0% {
        transform: rotate(0deg) translateX(var(--orbit-size-half)) scale(1.5);
    }
    100% {
        transform: rotate(360deg) translateX(var(--orbit-size-half)) scale(1.5);
    }
}

@keyframes ufo-flies-away {
    0% { /* Start from the casino */
        top: 440px;
        left: 50px;
        transform: translateX(var(--orbit-size-half)) scale(1.5);
    }
    10% { /* Flies to the tesla */
        top: 380px;
        left: 315px;
        transform: translateX(var(--orbit-size-half)) scale(1.5) rotateZ(-10deg);
    }
    70% {/* Stays at the tesla for a while, tractor beaming it */
        top: 380px;
        left: 315px;
        transform: translateX(var(--orbit-size-half)) scale(1.5) rotateZ(10deg);
    }
    75% { /* Flies down a little spots something */
        top: 450px;
        left: 130px;
        transform: translateX(var(--orbit-size-half)) scale(1.55) rotateZ(0deg);
    }
    90% {   /* Realize it's a F-35 Fighter  */
        top: 450px;
        left: 130px;
        transform: translateX(var(--orbit-size-half)) scale(1.55) rotateZ(0deg);

    }
    100% {  /* Flies away from the F-35 Fighter Jet */
        top: -150px; 
        left: 900px;
        transform: translateX(var(--orbit-size-half)) scale(0.8);
    }
}

#ufo {
    position: absolute;
    width: var(--ufo-size);

    top: 50%;
    left: 50%;  
    
    animation: ufo-counter-rotate var(--orbit-timer) linear var(--orbit-delay) var(--orbit-iterations);
    z-index: 2;
}

/* This adds counter rotation to the ufo so it doesn't go upside down */
@keyframes ufo-counter-rotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(-360deg);

    }
}

#tesla-car {
    position: absolute;
    width: 40px;
    top: 500px;
    left: 800px;
    z-index: 1;

    animation: tesla-drive 3s ease-out 0s forwards,
                tesla-tractored 1s ease-in 6.7s forwards;
}

@keyframes tesla-drive {
    100% {
        left: 425px;
    }
}

@keyframes tesla-tractored {
    0% {
        left: 425px;
        transform: scale(1) rotate(-5deg);
    }
    20% {
        transform: scale(0.95) rotate(5deg);
    }
    40% {
        transform: scale(0.90) rotate(-5deg);
    }
    60% {
        transform: scale(0.85) rotate(5deg);
        opacity: 1;
    }
    80% {
        transform: scale(0.80) rotate(-5deg);
        opacity: 1;
    }
    100% {
        left: 425px;
        top: 480px;
        transform: scale(0.65);
        opacity: 0;
    }
}

/*TODO: Add tesla getting tractored animation*/
#tractor-beam {
    position: absolute;

    z-index: 5;
    top: 455px;
    left: 430px;  
    
    width: 30px;
    height: 45px;   

    opacity: 0;
    z-index: 1;
    background: rgba(0, 255, 255,0.8);
    transform: perspective(20px) rotateX(25deg);

    animation: tractor-beaming 1s linear 6.7s forwards;
}

@keyframes tractor-beaming {
    0% {
        opacity: 1;
    }
    10% {
        opacity: 0.2;
    }
    15% {
        opacity: 0.9;
    }
    17% {
        opacity: 1;
    }
    18% {
        opacity: 0.7;
    }
    20% {
        opacity: 0.4;
    }
    30% {
        opacity: 0.12;
    }
    99% {
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}
#fighter-jet {
    position: absolute;
    width: 60px;
    left: -100px;
    top: 700px;
    transform: scaleX(-1) rotate(75deg) scale(1);
    z-index: 2;

    animation: fighter-jet-chase 2s linear 8s forwards;
}

@keyframes fighter-jet-chase {
    0% {
        left: -100px;
        top: 700px;
        transform: scaleX(-1) rotate(75deg) scale(1);
    }
    100% {
        left: 900px;
        top: -100px;
        transform: scaleX(-1) rotate(75deg) scale(0.5);;
    }
}

/* Piece of the map that the tesla drives under */
#map-sign-zdex {
    position: absolute;
    z-index: 2;
    top: -13px;
    left: 0px;
}
